#!/opt/common/CentOS_6-dev/python/python-2.7.10/bin/python
##########################################################################################
# MSKCC CMO
descr = 'Index a bam'
##########################################################################################

import argparse
import subprocess
import os
import string
import uuid
import cmo, shutil

parser = argparse.ArgumentParser(description = descr, formatter_class = argparse.RawTextHelpFormatter)
parser.add_argument('--bam', help = 'BAM file to index', required = True)
args = parser.parse_args()
bam = args.bam
# create .bam.bai
command = ["samtools","index",args.bam]
cmo.util.call_cmd(" ".join(command), shell=True)
# create .bai
shutil.copy(os.path.basename(bam) + ".bai",os.path.basename(bam).replace(".bam", ".bai"))
